<div class="user-profile">
  <div class="profile-card card bg-white shadow-sm rounded">
    <div class="row no-gutters align-items-center">
      <div class="col-4">
        <% if @user.image.attached? %>
          <%= cl_image_tag @user.photo.key, class: "profile-picture img-fluid rounded-left", style: "height: 100px; object-fit: cover;", onerror: "this.style.display='none'" %>
        <% end %>
      </div>
      <div class="col-8">
        <div class="card-body">
          <h2 class="card-title mb-1"><%= @user.name %></h2>
          <p class="card-text username">@<%= @user.username %></p>
             <%= button_to "Message", "#", method: :get, class: "btn btn-secondary" %>
        </div>
      </div>
    </div>
  </div>

  <div class="profile-info card bg-white shadow-sm rounded p-3 mb-3">
    <div class="about-me">
      <h3>About Me</h3>
      <p><%= @user.bio %></p>
    </div>

    <div class="favorites">
      <h3>Favourites</h3>
      <% if @user.favorites.any? %>
        <% @user.favorites.each do |favorite| %>
          <div class="favorite-item">
            <%= cl_image_tag favorite.location.image.key, class: "favorite-image", height: 100, onerror: "this.style.display='none'" if favorite.location.image.attached? %>
            <span><%= favorite.location.name %></span>
          </div>
        <% end %>
      <% else %>
        <p>Add some favorites!</p>
      <% end %>
    </div>
  </div>
</div>

<div class="user-swims">
  <h3>My Swim Locations</h3>
  <% if @user.locations.any? %>
    <% @user.locations.each do |location| %>
      <div class="swim-item">
        <%= cl_image_tag location.image.key, class: "swim-image", height: 100, onerror: "this.style.display='none'" if location.image.attached? %>
        <span><%= location.name %></span>
      </div>
    <% end %>
  <% else %>
    <p>You haven't added any swim locations yet.</p>
    <%= link_to "Add a new swim location", new_location_path, class: "btn btn-primary" %>
  <% end %>
</div>
